<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <!-- Google 爬虫规则 -->
        <meta name="fragment" content="!" />
        <title>首页</title>
        <script src="/external/require/require.setting.js" type="text/javascript"></script>
        <script src="/external/require/require.js" type="text/javascript"></script>


        <script src="/external/jquery/jquery.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="/external/semantic/dist/semantic.css">
        <link rel="stylesheet" type="text/css" href="/external/common/modules.css">
    </head>
    <!-- 全局控制器 -->
    <body ms-controller="main"
        mss-widget="loading,loading" data-loading-type="img" data-loading-modal-background="#ccc" data-loading-modal-opacity="0.5">
        <h1>{{view.title}}</h1>

        <a href="#!/userlist">home</a>
        <a href="#!/menu">menu</a>
        <a href="#!/about">about</a>

        <!-- 模块容器 -->
        <div class="oni-helper-clearfix slider oni-helper-reset">
            <div ms-view class="oni-mmRouter-slide"></div>
        </div>

        <div ms-include-src="view.footer"></div>

        <!-- 尾部公用js -->
        <script type="text/javascript">

            ;require(["rConfig"],function(routerConfig){
                "use strict";

                // 数组头部添加 av 依赖
                var reArr = ["av"];

                console.log("routerConfig",routerConfig);

                ;require(reArr.concat(routerConfig),function(av){
                    var unit = loli.unit;
                    var vm = av.define({
                        $id : "main",
                        // 布局对象
                        view : {
                            footer : av.html("layout/common/footer")
                        }
                    });

                    // 启动路由
                    av.history.start();
                    console.log("av.history.start");

                    vm.scan();
                });

            });
            
        </script>


    </body>
</html>